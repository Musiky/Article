# canvas å®ç°åˆ®åˆ®å¡ï¼ˆæ©¡çš®æ“¦ï¼‰åŠŸèƒ½
> ç¬”ä¸»æœ€è¿‘ä¸€ä¸ªå¤šæœˆä»¥æ¥ â€œæ·±å…¥â€œ ç ”ç©¶äº† canvas çš„å®ç°åŸç†ï¼Œä¸€å£æ°”è¯»å®Œäº† ã€ŠHTML5 Canvas æ ¸å¿ƒæŠ€æœ¯ã€‹è¿™æœ¬ä¹¦ï¼›è€Œè¿™ä¸€åˆ‡ä»¥åŠè¿™ç¯‡æ–‡ç« çš„è¯ç”Ÿï¼Œéƒ½æºäºç¬”ä¸»å…¬å¸çš„ä¸€ä½å®ä¹ äº§å“ç»ç†~  
> è¿™ä½å®ä¹ ç”Ÿæ‹¥æœ‰åˆšæ¯•ä¸šæ—¶çš„è¡€æ°”æ–¹åˆšï¼Œä»¥åŠå¤©é©¬è¡Œç©ºçš„æƒ³è±¡åŠ›ï¼›ä»–ä»æœªè€ƒè™‘è¿‡é¡¹ç›®çš„å®é™…éœ€æ±‚ï¼Œä»¥åŠä¸Šçº¿æ—¶é—´æˆæœ¬ï¼Œåœ¨æˆ‘ä»¬å…¬å¸ä»¥æ³¨é‡äº§å“åŠŸèƒ½ä¸ºå¯¼å‘çš„æ°›å›´ä¸­ï¼Œè‡ªæˆä¸€æ´¾ï¼Œæˆä¸ºä¸€è‚¡æ¸…æµ ğŸ˜‚  
> ä¸€ä¸ªæ¨å¹¿çš„å°é¡µé¢ï¼Œéœ€è¦æœ‰å±±æœ‰æ°´ï¼Œæœ‰å¤©ç©ºæœ‰æµæ˜Ÿï¼Œæ‰‹æŒ‡æ”¾ä¸Šå»è¿˜å¾—æ³›èµ·æ¶Ÿæ¼ªï¼Œæ‹¿åˆ°éœ€æ±‚æ–‡æ¡£æ—¶å“å¾—æˆ‘èµ¶ç´§ä¸Š GG æœ demoï¼Œè¿™æ—¶æˆ‘å‘ç°å•ä¸ª demo éƒ½èƒ½å¾ˆå¥½çš„è¿è¡Œåœ¨é¡µé¢ä¸­ï¼Œå¯æ˜¯å½“ä»–ä»¬åˆå¹¶ä»¥åï¼Œåœ¨æµè§ˆå™¨è°ƒè¯•é¢æ¿ä¸­ä¸€è¡Œè¡Œé²œçº¢çš„æ–‡å­—ä¸åœçš„æ‹æ‰“ç€æˆ‘çš„è„¸é¢Šã€‚æˆ‘çªç„¶å‘ç°è‡ªå·±åœ¨é‡åˆ°ä¸€äº›å¥‡è‘©éœ€æ±‚æ—¶ï¼Œæ˜¯å¤šä¹ˆçš„æ— åŠ©ã€‚å› ä¸ºæˆ‘ä¸ä¼š canvas å•Šï¼  
> æœ¬ç³»åˆ—æ–‡ç« æ—¨åœ¨ä¸å¤§å®¶åˆ†äº«ç¬”ä¸»è¿™æ®µæ—¶é—´å­¦ä¹  canvas çš„ç»éªŒï¼Œç”±æµ…å…¥æ·±ï¼Œå°†è‡ªå·±å®é™…å·¥ä½œè¿‡ç¨‹ä¸­æŠ„è¿‡çš„ demo ï¼ˆä»€ä¹ˆï¼Ÿåšä¸ªæŠ½å¥–ï¼Ÿè¯„ä¼°æ—¶é—´ï¼Ÿä½ ç­‰ç­‰ï¼Œæˆ‘æœä¸‹ demoâ€¦â€¦ å“¦ï¼Œä¸ç”¨è¯„ä¼°æ—¶é—´äº†ï¼Œå·²ç»æ”¹å¥½äº†ï¼‰éƒ½ä¸€ä¸€å®ç°ä¸€éï¼Œè®©å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘ä»¬é‡åˆ°å¥‡è‘©éœ€æ±‚å•¦ï¼  

å…ˆä¸Šé¢„è§ˆ [demo](https://musiky.github.io/canvas/eraser/)
![eraser code](./img/eraser_code.png)

> æˆ‘ä»¬å‡è®¾æˆ‘ä»¬çš„è¯»è€…éƒ½éå¸¸ç†Ÿæ‚‰ javascript åŸç”Ÿè¯­æ³•ã€‚  

### æœ¬ç« æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹

* **context ç»˜å›¾ç¯å¢ƒ**
æˆ‘ä»¬å¯ä»¥é€šè¿‡ canvas æ ‡ç­¾æ¥æ–°å»ºä¸€ä¸ª canvas ç”»å¸ƒï¼Œè¿™ä¸ª canvas ç”»å¸ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ“ä½œç”»å¸ƒå†…çš„åƒç´ ï¼Œæ¥å®ç°ç»˜åˆ¶å›¾å½¢ï¼ŒåŠ¨ç”»ç­‰åŠŸèƒ½ï¼›
æƒ³è¦æ“ä½œ canvas ç”»å¸ƒé‡Œçš„å†…å®¹ï¼Œåªèƒ½ä½¿ç”¨ javascriptï¼Œåƒä¸‡åˆ«å°è¯•ç”¨ css3 çš„åŠ¨ç”»å±æ€§å»æ“ä½œå®ƒï¼Œæ²¡åµç”¨~

æˆ‘ä»¬æƒ³è¦æ“ä½œ canvasï¼Œé¦–å…ˆéœ€è¦è·å–è¿™ä¸ª canvas å¯¹è±¡

``` html
<canvas id="canvas" width="250" height="50"></canvas>
```

``` javascript
    // è·å– canvas å¯¹è±¡
let canvas = document.getElementById('canvas'),  
    // è·å– cavans ç»˜å›¾ç¯å¢ƒå¯¹è±¡ï¼Œå‚æ•°ä¸º 2d
	context = canvas.getContext('2d');
```

context æ˜¯ç»˜å›¾ç¯å¢ƒå¯¹è±¡ï¼Œå¦‚æœä½ åœ¨æµè§ˆå™¨ä¸­è¾“å‡º contextï¼Œä½ ä¼šå‘ç°é‡Œé¢åŒ…å«äº†è®¸å¤šå±æ€§ï¼Œå¦‚ï¼š`fillStyle` `strokeStyle`ç­‰ï¼Œä»¥åŠä¸€äº›å‡½æ•°æ–¹æ³•ï¼Œ`arc()` `rect()` `save()` `restore()` `clip()`ç­‰ç­‰ã€‚

<br/>

* **ç»˜åˆ¶åŸºæœ¬å›¾å½¢**

#### çŸ©å½¢

`context.rect($x, $y, $width, $height)`

> çŸ©å½¢æ˜¯æœ€ç®€å•çš„å›¾åƒç»˜åˆ¶äº†ï¼›  

ğŸ”‘ å‚æ•°ï¼š
$x $yï¼šåˆ†åˆ«å¯¹åº”çŸ©å½¢å·¦ä¸Šè§’åœ¨ canvas ç”»å¸ƒä¸­çš„åæ ‡ï¼›
$width $heightï¼šå°±æ˜¯çŸ©å½¢çš„å®½é«˜å•¦ï¼›

âš ï¸ ä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œ~åªæ˜¯ç»˜åˆ¶çš„çŸ©å½¢çš„è·¯å¾„~ï¼Œè¯¥è·¯å¾„æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ åœ¨åé¢è°ƒç”¨ `context.fill()` å’Œ `context.stroke()` æ–¹æ³•ï¼Œè¿›è¡Œå¡«å……æˆ–è€…æè¾¹ã€‚

å¡«å……æè¾¹çš„è¡¨ç°å½¢å¼å–å†³äº context ç»˜å›¾ç¯å¢ƒçš„ `fillStyle`å’Œ`strokeStyle`å±æ€§çš„å€¼ã€‚

#### åœ†å½¢  

`context.arc($x, $y, $radius, $start_radian, $end_radian [, $clockwise])`

> åœ†å½¢ç¨å¾®å¤æ‚ä¸€ä¸¢ä¸¢ï¼Œä¸è¿‡ä¹Ÿå¾ˆç®€å•å•¦ã€‚  

ğŸ”‘ å‚æ•°ï¼š
$x $yï¼šä»£è¡¨åœ†çš„åœ†å¿ƒåœ¨ canvas ç”»å¸ƒä¸­çš„åæ ‡ç‚¹ï¼›
$radiusï¼šåœ†çš„åŠå¾„ï¼ŒåŠå¾„ï¼Œæ˜¯åŠå¾„ï¼Œä¸æ˜¯ç›´å¾„ï¼
$start_radian $end_radianï¼šèµ·å§‹è§’å’Œç»ˆæ­¢è§’ï¼Œä»–ä»¬æ¥æ”¶çš„å€¼åªèƒ½æ˜¯å¼§åº¦ã€‚

> è®°å¾—åœ†å‘¨ç‡ä¹ˆï¼Ÿè®°å¾—3.14æ˜¯å•¥ä¸ï¼Œåœ¨ javascript ä¸­ `Math.PI` å°±ä»£è¡¨çš„ Ï€ ï¼›  
> ç®€å•çš„è¯´ï¼Œåœ†æœ‰360Â°ï¼Œè€Œä¸€ä¸ª Ï€ æ˜¯180Â°ï¼Œä½ æƒ³ç”»ä¸ªæ•´åœ†ï¼Œå°±æ˜¯ä» 0Â° åˆ° 360Â° èµ°ä¸€åœˆï¼Œ`Math.PI * 2`ï¼›ä½ æƒ³ç”»ä¸ªåŠåœ†ï¼Œå°±æ˜¯ 0Â° åˆ° 180Â°ï¼Œ`Math.PI`ï¼›  

$clockwiseï¼šä¼ å…¥å¸ƒå°”å€¼ï¼Œfalse åœ†ç”±é¡ºæ—¶é’ˆç»˜åˆ¶ï¼›true åœ†ç”±é€†æ—¶é’ˆç»˜åˆ¶ã€‚

å’ŒçŸ©å½¢ç›¸åŒï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿåªæ˜¯ç»˜åˆ¶äº†ä¸€ä¸ªè·¯å¾„ï¼Œæƒ³è¦åœ¨é¡µé¢æ˜¾ç¤ºï¼Œä»»ç„¶æ˜¯éœ€è¦è°ƒç”¨ `context.fill()` å’Œ `context.stroke()` ä¸¤ä¸ªæ–¹æ³•ã€‚

#### å½“å‰è·¯å¾„  

`context.beginPath()`
æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªé›†åˆå›¾å½¢ä¹‹å‰ï¼Œéƒ½åº”å½“å…ˆè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šæ¸…é™¤ä¸Šä¸€æ¬¡ç»˜åˆ¶æ—¶ç•™ä¸‹çš„è·¯å¾„ï¼Œå¹¶å°†æœ¬æ¬¡ç»˜åˆ¶çš„è·¯å¾„ä½œä¸º ~å½“å‰è·¯å¾„~ã€‚

#### ç»˜åˆ¶çŸ©å½¢å’Œåœ†  

``` javascript
let canvas = document.getElementById('canvas'),
    context = canvas.getContext('2d');

/**
 * ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢
 * @param {Num} x      çŸ©å½¢çš„å·¦ä¸Šè§’ x è½´çš„ä½ç½®
 * @param {Num} y      çŸ©å½¢çš„å·¦ä¸Šè§’ y è½´çš„ä½ç½®
 * @param {Num} width  çŸ©å½¢çš„å®½åº¦
 * @param {Num} height çŸ©å½¢çš„é«˜åº¦
 */
function drawRect(x, y, width, height) {
	context.beginPath();               // æ¸…ç©ºä¸Šä¸€æ¬¡çš„è·¯å¾„
	context.rect(x, y, width, height); // åˆ›å»ºä¸€ä¸ªçŸ©å½¢è·¯å¾„
	context.fill();                    // å°†è¯¥çŸ©å½¢è·¯å¾„å¡«å……ä¸ºç»˜å›¾ç¯å¢ƒæŒ‡å®šçš„å¡«å……é¢œè‰² context.fillStyle
}

/**
 * ç»˜åˆ¶ä¸€ä¸ªåœ†å½¢
 * @param {Num} centerX  åœ†å¿ƒ x è½´åæ ‡
 * @param {Num} centerY  åœ†å¿ƒ y è½´åæ ‡
 * @param {Num} radius   åœ†çš„åŠå¾„
 */
function drawCircle(centerX, centerY, radius) {
    context.beginPath();
    context.arc(centerX, centerY, radius, 0, Math.PI * 2, false);
    context.fill();
}

drawRect(0, 0, 100, 100);
drawCircle(160, 50, 50);
```

<br/>

* **æ¸…é™¤ç”»å¸ƒå†…å®¹**
`context.clearRect($x, $y, $width, $height)`
è¯¥æ–¹æ³•ï¼Œæ“¦é™¤è§„å®šçŸ©å½¢ä¸­çš„æ‰€æœ‰å†…å®¹ï¼›å‚æ•°åŒç»˜åˆ¶çŸ©å½¢æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™æ˜¯æ¸…é™¤ï¼

<br/>

* **canvas çš„çŠ¶æ€**

canvas çš„çŠ¶æ€åŒ…æ‹¬äº†ï¼š
1. å½“å‰åæ ‡å˜æ¢ä¿¡æ¯ï¼Œ`transform` çš„ä¸œè¥¿ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæœ¬ç« å¹¶ä¸æ¶‰åŠï¼›
2. å‰ªè¾‘åŒºåŸŸï¼Œè¿™æ˜¯æœ¬ç« çš„æ ¸å¿ƒï¼Œ`context.clip()` åé¢ä¼šè¯¦ç»†è®²åˆ°ï¼›
3. æ‰€æœ‰ç»˜å›¾ç¯å¢ƒï¼ˆcontextï¼‰å±æ€§ï¼Œä¹Ÿå°±åˆšåˆšæåˆ°çš„ï¼Œ`fillStyle[è§„å®šå¡«å……çš„é¢œè‰²]` `strokeStyle[è§„å®šæè¾¹çš„é¢œè‰²]`ï¼Œè¿™äº›çŠ¶æ€å†³å®šçš„ canvas ä¸­ç»˜åˆ¶çš„å›¾åƒçš„å±•ç¤ºæ•ˆæœï¼Œä»–ä»¬æ˜¯å…¨å±€çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦è§„å®šäº†`fillStyle`ä¸ºçº¢è‰²ï¼Œé‚£ä¹ˆé™¤éåœ¨ javascript åé¢é‡ç½®è¿™ä¸ªå±æ€§ï¼Œå¦åˆ™ä½ å°†æ¥ç»˜åˆ¶å‡ºæ¥çš„å‡ ä½•å›¾å½¢æ°¸è¿œéƒ½æ˜¯çº¢è‰²çš„ã€‚

``` javascript
context.fillStyle = 'red';
drawRect(0, 0, 100, 100);   // -> red
drawRect(110, 0, 100, 100); // -> red

context.fillStyle = 'blue';
drawRect(220, 0, 100, 100); // -> blue
```

<br/>

* **canvas çš„çŠ¶æ€ä¿å­˜ä¸æ¢å¤**
å‰é¢å·²ç»æåˆ°è¿‡ï¼Œcanvas çš„çŠ¶æ€æ˜¯ä»€ä¹ˆã€‚
è€Œè¿™é‡Œå¼•å‡ºçš„æ˜¯ç»˜å›¾ç¯å¢ƒä¸­çš„ä¸¤ä¸ªå¾ˆé‡è¦çš„æ–¹æ³•ï¼Œsave() å’Œ restore()ã€‚

> å¦‚æœæœ‰ä¸ªéœ€æ±‚ï¼Œæˆ‘æƒ³è¦å…ˆç»˜åˆ¶ä¸€ä¸ªçº¢è‰²çš„çŸ©å½¢ï¼Œæ¥ç€ç»˜åˆ¶ä¸€ä¸ªè“è‰²çš„çŸ©å½¢ï¼Œæœ€åå†ç»˜åˆ¶ä¸€ä¸ªçº¢è‰²çš„çŸ©å½¢  

æˆ‘ä»¬çŸ¥é“ javascript æ˜¯é€æ¡åŒæ­¥æ‰§è¡Œçš„ï¼Œé‚£ä¹ˆè¦å®ç°ä¸Šé¢çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ç»˜å›¾ç¯å¢ƒçš„å¡«å……é¢œè‰²ä¸ºçº¢è‰²ï¼Œç»˜åˆ¶äº†ç¬¬ä¸€ä¸ªçº¢è‰²çŸ©å½¢åï¼Œå†å®šä¹‰ç»˜å›¾ç¯å¢ƒçš„å¡«å……é¢œè‰²ä¸ºè“è‰²ï¼Œç»˜åˆ¶ï¼Œå†å®šä¹‰ç»˜å›¾ç¯å¢ƒçš„å¡«å……é¢œè‰²ä¸ºçº¢è‰²ï¼Œå°±åƒè¿™æ ·ï¼š

``` javascript
context.fillStyle = 'red';
drawRect(0, 0, 100, 100);   // -> red

context.fillStyle = 'blue';
drawRect(110, 0, 100, 100); // -> blue

context.fillStyle = 'red';
drawRect(220, 0, 100, 100); // -> red
```

*æ˜¯ä¸æ˜¯è§‰å¾—è¿™æ ·åšéå¸¸çš„å‚»~*

æ­¤æ—¶ save() å’Œ restore() å°±ç«™å‡ºæ¥è¯´ä¸äº†ï¼

`context.save()`ï¼šèƒ½å°†æ‰§è¡Œè¯¥æ–¹æ³•ä¹‹å‰çš„æ‰€æœ‰ ~canvas çŠ¶æ€~ ä¿å­˜ä¸‹æ¥ï¼›
`context.restore()` ï¼šå°† save æ–¹æ³•ä¿å­˜çš„ ~canvas çŠ¶æ€~ é‡Šæ”¾å‡ºæ¥ï¼›

æ‰€ä»¥ä¸Šé¢å¼±æ™ºçš„å†™æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆè¿™æ ·ï¼š

``` javascript
context.fillStyle = 'red';
drawRect(0, 0, 100, 100);    // - red 

context.save();

context.fillStyle = 'blue';
drawRect(110, 0, 100, 100);  // -> blue

context.restore();
drawRect(220, 0, 100, 100);  // -> red
```

save æ–¹æ³•ä¿å­˜çš„æ˜¯ `context.fillStyle = 'red'` è¿™ä¸ªçŠ¶æ€ï¼Œå½“è®¾ç½®è¿™ä¸ªçŠ¶æ€ä¸ºè“è‰²æ—¶ï¼Œcontext ç»˜å›¾ç¯å¢ƒçš„ fillStyle å±æ€§å˜æˆäº†è“è‰²ï¼Œå½“æ‰§è¡Œ restore æ–¹æ³•æ—¶ï¼Œåˆè¢«æ¢å¤æˆäº†çº¢è‰²ã€‚

<br/>

* **å‰ªè¾‘åŒºåŸŸ clip()**

context ç»˜å›¾ç¯å¢ƒå¯¹è±¡æä¾›äº†ä¸€ä¸ª `context.clip()` å‰ªè¾‘åŒºåŸŸæ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯æœ¬ç« å®ç°æ©¡çš®æ“¦åŠŸèƒ½çš„æ ¸å¿ƒæ–¹æ³•ã€‚

è¯¥æ–¹æ³•ä¼šå°† ~å½“å‰è·¯å¾„~ ä½œä¸ºä¸€ä¸ªå‰ªè¾‘åŒºåŸŸï¼Œä½¿è¯¥åŒºåŸŸä»¥å¤–çš„å›¾åƒä¸å¯è§ã€‚

å¹¶ä¸”åœ¨å‰ªè¾‘åŒºåŸŸä¸­ï¼Œæ‰€æœ‰å¡«å……ï¼Œæ¸…é™¤ç­‰æ“ä½œä¸ä¼šå½±å“å‰ªè¾‘åŒºåŸŸä»¥å¤–çš„å†…å®¹ã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå‰ªè¾‘åŒºåŸŸï¼Œåœ¨è¿™ä¸ªå‰ªè¾‘åŒºåŸŸä¸­æ‰§è¡Œæ¸…é™¤æ“ä½œï¼Œå°±å¯ä»¥æ“¦é™¤ canvas ç”»å¸ƒä¸­æŒ‡å®šçš„å†…å®¹ã€‚

``` javascript
drawRect(0, 0, 100, 100);

context.save();

// åˆ›å»ºä¸€ä¸ªåœ†å½¢è·¯å¾„ï¼Œå¹¶ä½œä¸ºå‰ªè¾‘åŒºåŸŸï¼Œæ“¦é™¤è¯¥åŒºåŸŸä¸­çš„æ‰€æœ‰å†…å®¹
drawCircle(0, 0, 50);
context.clip();
context.clearRect(0, 0, canvas.width, canvas.height);

context.restore();

drawRect(110, 0, 100, 100);
```

<br/>

### å¼€å§‹å®ç°æ©¡çš®æ“¦

> æœ¬ç« éœ€è¦ç”¨åˆ°çš„åŸºç¡€çŸ¥è¯†å°±è®²åˆ°è¿™é‡Œå•¦ï¼Œå¦‚æœå¤§å®¶è¿˜æœ‰ç–‘é—®ï¼Œå¯ä»¥æŸ¥é˜… w3school ä¸Šçš„ [canvas æ–‡æ¡£](http://www.w3school.com.cn/tags/html_ref_canvas.asp)  

âš ï¸ è¿™ä¸ª demo åªèƒ½è¿è¡Œåœ¨æ‰‹æœºä¸Šï¼Œæµè§ˆå™¨éœ€è¦æ‰“å¼€æ‰‹æœºæ¨¡æ‹Ÿã€‚

ğŸš¶ æ€è·¯ï¼š
1. å®šä¹‰ä¸€ä¸ªå…¬ç”¨ç»˜åˆ¶å‰ªè¾‘åŒºåŸŸçš„æ–¹æ³• `drawEraser()` ï¼Œè¯¥æ–¹æ³•ä¼šå°†å½“å‰çš„è·¯å¾„ä½œä¸ºå‰ªè¾‘è·¯å¾„ç»˜åˆ¶ï¼Œå¹¶::æ¸…é™¤è¯¥è·¯å¾„å†…çš„æ‰€æœ‰å†…å®¹::ï¼›
2. æ‰‹æŒ‡æŒ‰ä¸‹æ—¶ï¼Œè§¦å‘ touchstart äº‹ä»¶ï¼Œå¼€å¯ dragging çŠ¶æ€ï¼Œè°ƒç”¨ `drawEraser()` æ–¹æ³•ï¼Œç»˜åˆ¶ç¬¬ä¸€ä¸ªå‰ªè¾‘åŒºåŸŸï¼›
3. æ‰‹æŒ‡ç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œä¸æ–­çš„è°ƒç”¨ `drawEraser()` æ–¹æ³•ï¼Œç»˜åˆ¶å‰ªè¾‘åŒºåŸŸï¼Œå®ç°æ©¡çš®æ“¦æ•ˆæœã€‚

``` html
<!DOCTYPE html>
<html>

<head>
	<title>æ©¡çš®æ“¦</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
</head>

<body>

	<canvas id="canvas" width="300" height="300" style="background: #eee">
		Canvas not supported
	</canvas>

	<script>
		var canvas = document.getElementById('canvas'),
			context = canvas.getContext('2d'),

			ERASER_SIZE = 15,  // æ©¡çš®æ“¦çš„å¤§å°

			dragging = false;  // æ˜¯å¦å¤„åœ¨æ‹–åŠ¨çŠ¶æ€

		/**
		 * è½¬æ¢åæ ‡å€¼
		 * å°†é¼ æ ‡ç‚¹å‡»æˆ–ç§»åŠ¨æ—¶è·å–çš„åæ ‡å€¼ï¼Œå‡å» canvas ç›¸å¯¹çª—å£çš„åæ ‡å€¼ï¼Œå°±æ˜¯åœ¨ canvas ç”»å¸ƒä¸­çš„åæ ‡å€¼
		 * @param {Obj} e æ‰‹æŒ‡å½“å‰ç›¸å¯¹çª—å£çš„åæ ‡ä½ç½®
		 */
		function windowToCanvas(e) {
			let x = e.targetTouches[0].clientX,
				y = e.targetTouches[0].clientY,
				bbox = canvas.getBoundingClientRect();

			return {
				x: x - bbox.left,
				y: y - bbox.top
			}
		}

		/**
		 * ç»˜åˆ¶å‰ªè¾‘åŒºåŸŸï¼Œå¹¶æ¸…é™¤è¯¥åŒºåŸŸä¸­çš„å†…å®¹
		 * @param {Obj} loc æ‰‹æŒ‡å½“å‰ç›¸å¯¹ canvas ç”»å¸ƒä¸­çš„åæ ‡ä½ç½®
		 */
		function drawEraser(loc) {
			context.save();
			context.beginPath();
			context.arc(loc.x, loc.y, ERASER_SIZE, 0, Math.PI * 2, false);
			context.clip();
			context.clearRect(0, 0, canvas.width, canvas.height);
			context.restore();
		}

		/**
		 * é¡µé¢åŠ è½½æ—¶ï¼Œç»˜åˆ¶ä¸€ä¸ªé“ºæ»¡ canvas ç”»å¸ƒçš„çŸ©å½¢
		 * è¯¥çŸ©å½¢ç”¨äºè¢«æ“¦é™¤
		 */
		window.onload = function (e) {
			context.save();
			context.fillStyle = '#666';
			context.beginPath();
			context.fillRect(0, 0, canvas.width, canvas.height);
			context.restore();
		}

		/**
		 * â‘  æ‰‹æŒ‡æŒ‰ä¸‹æ—¶ï¼Œå¼€å¯ dragging çŠ¶æ€ï¼Œå¹¶ç»˜åˆ¶å‰ªè¾‘åŒºåŸŸ
		 */
		canvas.addEventListener('touchstart', function (e) {
			var loc = windowToCanvas(e);
			dragging = true;
			drawEraser(loc);
		})

		/**
		 * â‘¡ æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œä¸æ–­è¿›è¡Œå‰ªè¾‘åŒºåŸŸçš„ç»˜åˆ¶ï¼Œä»¥åŠè·¯å¾„æ›´æ–°ï¼Œå®ç°æ“¦é™¤çš„æ•ˆæœ
		 */
		canvas.addEventListener('touchmove', function (e) {
			var loc;

			if (dragging) {
				loc = windowToCanvas(e);
				drawEraser(loc);
			}
		})

		/**
		 * â‘¢ æ‰‹æŒ‡ç¦»å¼€ï¼Œç»“æŸæ“¦é™¤è¿‡ç¨‹
		 */
		canvas.addEventListener('touchend', function (e) {
			dragging = false;
		})
	</script>
</body>

</html>
```


### ç»“è¯­
* ä½¿ç”¨ canvas å®ç°æ©¡çš®æ“¦åŠŸèƒ½æ˜¯éå¸¸ç®€å•çš„ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ©¡çš®æ“¦çš„å½¢çŠ¶æ¢æˆçŸ©å½¢ï¼Œå¤šè¾¹å½¢ï¼Œäº”è§’æ˜Ÿç­‰ç­‰ï¼›åªéœ€è¦æ”¹å˜ç»˜åˆ¶å‰ªè¾‘åŒºåŸŸçš„è·¯å¾„å°±è¡Œäº†ï¼›

* åˆ®åˆ®å¡çš„åŠŸèƒ½ï¼Œä¹Ÿå®Œå…¨æ˜¯ç”±æ©¡çš®æ“¦åŠŸèƒ½å®ç°çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ canvas çš„èƒŒæ™¯å›¾ç‰‡è®¾ç½®ä¸ºå¼€å¥–çš„å†…å®¹ï¼Œæ–‡å­—ç­‰ï¼Œç”¨ä¸€ä¸ªæ•°ç»„å°†è¿™äº›å›¾ç‰‡çš„è·¯å¾„åŒ…å«è¿›å»ï¼Œæ¯æ¬¡åŠ è½½é¡µé¢æ—¶ï¼Œéšæœºè°ƒç”¨ä¸€ä¸ªæ•°ç»„å…ƒç´ ï¼›

* è¿™æœŸå†…å®¹å°±è®²åˆ°è¿™é‡Œï¼Œä¸‹æœŸå¸¦å¤§å®¶ç”¨ canvas å®ç° å¤§è½¬ç›˜æŠ½å¥–ï¼Œä¹å®«æ ¼æŠ½å¥–ã€‚3Qï¼Œé˜¿é‡Œå‘€å¤šã€‚

